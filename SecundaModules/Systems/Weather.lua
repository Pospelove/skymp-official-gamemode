Weather = {}

local idTesWeather = {
        DefaultWeather = 0x0000015E,
        SovngardeDark = 0x0010FEF8,
        RiftenOvercastFog = 0x0010FE7E,
        EditorCloudPreview = 0x0010E3D4,
        SkyrimClear_A = 0x0010E1F2,
        SkyrimCloudy_A = 0x0010E1F1,
        SkyrimClearSN_A = 0x0010E1F0,
        SkyrimCloudySN_A = 0x0010E1EF,
        SkyrimClearTU_A = 0x0010E1EE,
        SkyrimCloudyTU_A = 0x0010E1ED,
        SkyrimClearFF_A = 0x0010E1EC,
        SkyrimCloudyFF_A = 0x0010E1EB,
        SkyrimClearRE_A = 0x0010E1EA,
        SkyrimCloudyRE_A = 0x0010E1E9,
        SkyrimClearCO_A = 0x0010E1E8,
        SkyrimCloudyCO_A = 0x0010E1E7,
        SkyrimClearMA_A = 0x0010E1E6,
        SkyrimCloudyMA_A = 0x0010E1E5,
        SkyrimClearVT_A = 0x0010E1E4,
        SkyrimCloudyVT_A = 0x0010E1E3,
        FXWthrInvertWindowsWinterhold = 0x0010DA13,
        SovngardeClear = 0x0010D9EC,
        FXSkyrimStormBlowingGrass = 0x0010C32F,
        SkyrimCloudyVT = 0x0010A7A8,
        SkyrimFogVT = 0x0010A7A7,
        SkyrimOvercastRainVT = 0x0010A7A6,
        SkyrimClearVT = 0x0010A7A5,
        SkyrimCloudySN = 0x0010A245,
        SkyrimClearSN = 0x0010A244,
        SkyrimCloudyTU = 0x0010A243,
        SkyrimOvercastRainTU = 0x0010A242,
        SkyrimStormRainTU = 0x0010A241,
        SkyrimClearTU = 0x0010A240,
        SkyrimCloudyFF = 0x0010A23F,
        SkyrimFogFF = 0x0010A23E,
        SkyrimOvercastRainFF = 0x0010A23D,
        SkyrimStormRainFF = 0x0010A23C,
        SkyrimClearFF = 0x0010A23B,
        SkyrimCloudyRE = 0x0010A23A,
        SkyrimFogRE = 0x0010A239,
        SkyrimOvercastRainRE = 0x0010A238,
        SkyrimClearRE = 0x0010A237,
        SkyrimCloudyCO = 0x0010A236,
        SkyrimFogCO = 0x0010A235,
        SkyrimClearCO = 0x0010A234,
        SkyrimCloudyMA = 0x0010A233,
        SkyrimFogMA = 0x0010A232,
        SkyrimOvercastRainMA = 0x0010A231,
        SkyrimClearMA = 0x0010A230,
        KarthspireRedoubtFog = 0x00106635,
        SkyrimDA02Weather = 0x00105F40,
        SolitudeBluePalaceFog = 0x00105945,
        SolitudeBluePalaceFogNMARE = 0x00105944,
        SolitudeBluePalaceFogFEAR = 0x00105943,
        SolitudeBluePalaceFogARENA = 0x00105942,
        BloatedMansGrottoFog = 0x00105941,
        SkuldafnCloudy = 0x00104AB4,
        SkyrimMQ206weather = 0x0010199F,
        FXWthrInvertLightMarkarth = 0x00101910,
        FXWthrInvertWindowsWindhelm2 = 0x000ECC96,
        HelgenAttackWeather = 0x000D9329,
        FXWthrInvertLightsSolitude = 0x0005ED7A,
        FXWthrInvertLightsWhiterun = 0x0008282A,
        FXWthrInvertWindowsWhiterun = 0x0008277A,
        FXMagicStormRain = 0x000D4886,
        SkyrimOvercastWar = 0x000D299E,
        SkyrimStormSnow = 0x000C8221,
        SkyrimStormRain = 0x000C8220,
        SkyrimOvercastRain = 0x000C821F,
        SkyrimFog = 0x000C821E,
        FXWthrSunlightWhite = 0x00075491,
        FXWthrSunlight = 0x0007548F,
        BlackreachWeather = 0x00048C14,
        FXWthrInvertWindowsWindhelm = 0x000AEE84,
        WorldMapWeather = 0x000A6858,
        SovngardeFog = 0x000923FD,
        FXWthrInvertDayNighWarm = 0x000777CF,
        FXWthrCaveBluePaleLight = 0x00075DE5,
        FXWthrCaveBlueSkylight = 0x0006ED5B,
        FXWthrInvertDayNight = 0x0006ED5A,
        SkyrimOvercastSnow = 0x0004D7FB,
        TESTCloudyRain = 0x0002E7AB,
        SkyrimCloudy = 0x00012F89,
        SkyrimClear = 0x0000081A
}

local function SetUserWeather(user, weatherID)
  user:AddTask(function()
    user:ExecuteCommand("console", "fw " .. string.format("%X", weatherID))
  end)
end

function Weather.OnUserConnect(user)
  SetUserWeather(user, idTesWeather.SkyrimFog)
end

return Weather
